# tgsearch
Final project for the "Programming and Theory of Algorithms" HSE course. A search engine for most popular telegram channels.
#### Где что происходит
- в тетрадке `BFS_telegram_json_db.ipynb` с помощью мультипроцессинга скачиваются посты с телеграм-каналов. Так, запоминая упоминания других каналов, используется поиск в ширину. Информация о каналах (id, название, описание, id упомянутых каналов и id постов, в которых упоминаются каналы) и постах (id поста, id канала, текст поста, дата публикации, список id упомянутых каналов) записываются в базу данных `telegram.db` в таблицы _channels_ и _posts_ соответственно.
 - в тетрадке `tok_lem_syn_db.ipynb` обрабатываются посты из таблицы _posts_. Текст токенизируется, для каждого токена ищем леммы и синонимы в несколько процессов одновременно. Информация о токенах (id, токен, id постов, в которых упоминается токен, и синонимы) и леммах (id леммы, лемма, список id токенов) записываются в базу данных `telegram.db` в таблицы _tokens_ и _lemmas_ соответственно. Лемматизизация и разметка POS-тегов произведена с помощью библиотеки [Natasha](https://github.com/natasha/natasha). POS-теги размечены для того, чтобы векторизовать их. Для этого скачивается модель [RusVectōrēs](https://rusvectores.org/ru/models/). Она же ищет 2 самых похожих на токен слова. К сожалению, поиск токенов так и не был осуществлён, так как не хватило мощности.
 - в тетрадке `poiskovik.ipynb` происходит непосредственно поиск в постах. Однако сначала происходит дозапись текстов, приведённых к нижнему регистру и очищенных от пунктуации, и текстов, приведённых к нижнему регистру, очищенных от пунктуации и лемматизированных, в базу даных в таблицу _posts_. Выдача сохраняется в файл `posts.ipynb` в виде {пост: канал}. Сначала идут точные вхождения, затем идут вхождения других словоформ лемм введённого запроса. Если бы получилось сгенерировать синонимы, затем бы шли посты с синонимами. Количество слов в поиске не ограничено.
 - в файле `poiskovik.py` происходит то же самое, что в тетрадке `poiskovik.ipynb`, только без дозаписи в базу данных. Этот файл используется в приложении.
 - в файле  `app.py` реализовано приложение поисковика.
